# üîÑ Integra√ß√µes Pendentes - Sistema de Gerenciamento de Gruas

## üìä Resumo Executivo

**√öltima Atualiza√ß√£o:** 09 de Outubro de 2025

| Categoria | Total | Integrado | Parcial | Pendente |
|-----------|-------|-----------|---------|----------|
| **Financeiro** | 10 | 3 | 2 | 5 |
| **RH** | 8 | 2 | 3 | 3 |
| **Operacional** | 7 | 3 | 1 | 3 |
| **PWA** | 5 | 2 | 2 | 1 |
| **Novos M√≥dulos** | 2 | 0 | 0 | 2 |
| **TOTAL** | **32** | **10** | **8** | **14** |

**Prioridade:** Alta para Financeiro, Notifica√ß√µes e Alugu√©is

---

## üÜï NOVOS M√ìDULOS IMPLEMENTADOS (AGUARDANDO BACKEND)

### 1. **Sistema de Notifica√ß√µes** ‚è≥
**Status:** Frontend Completo | Backend Pendente  
**Localiza√ß√£o:** `/dashboard/notificacoes`  
**Documenta√ß√£o:** `NOTIFICACOES_README.md`

**Frontend Implementado:**
- ‚úÖ P√°gina de listagem de notifica√ß√µes com filtros
- ‚úÖ Dropdown de notifica√ß√µes no header
- ‚úÖ Cria√ß√£o de notifica√ß√µes (geral, por cliente, por funcion√°rio, por obra)
- ‚úÖ Sele√ß√£o m√∫ltipla de destinat√°rios
- ‚úÖ Marca√ß√£o de lida/n√£o lida
- ‚úÖ Estat√≠sticas e contadores
- ‚úÖ API Mock completa (`lib/api-notificacoes.ts`)

**APIs Backend Necess√°rias:**

#### 1.1 **GET** `/api/notificacoes`
Listar notifica√ß√µes do usu√°rio logado
```typescript
Query: { 
  lida?: boolean
  limit?: number
  offset?: number
}
Response: {
  success: boolean
  data: Notificacao[]
  total: number
  naoLidas: number
}
```

#### 1.2 **POST** `/api/notificacoes`
Criar nova notifica√ß√£o
```typescript
Body: {
  titulo: string
  mensagem: string
  tipo: 'info' | 'alerta' | 'sucesso' | 'erro'
  prioridade: 'baixa' | 'media' | 'alta'
  destinatarioTipo: 'geral' | 'cliente' | 'funcionario' | 'obra'
  destinatarios?: Array<{
    id: string
    tipo: 'cliente' | 'funcionario' | 'obra'
    nome: string
    info?: string
  }>
}
```

#### 1.3 **PUT** `/api/notificacoes/:id/marcar-lida`
Marcar notifica√ß√£o como lida

#### 1.4 **DELETE** `/api/notificacoes/:id`
Deletar notifica√ß√£o

**Integra√ß√µes Necess√°rias:**
- üîî Sistema de push notifications
- üìß Envio de email para notifica√ß√µes importantes
- üì± Notifica√ß√µes PWA
- üîó Integra√ß√£o com clientes, funcion√°rios e obras

**Prioridade:** üî¥ ALTA (sistema de comunica√ß√£o essencial)

---

### 2. **Alugu√©is de Resid√™ncias** ‚è≥
**Status:** Frontend Completo | Backend Pendente  
**Localiza√ß√£o:** `/dashboard/financeiro/alugueis`  
**Documenta√ß√£o:** `ALUGUEIS_RESIDENCIAS_README.md`

**Frontend Implementado:**
- ‚úÖ Gest√£o de resid√™ncias (CRUD)
- ‚úÖ Contratos de aluguel para funcion√°rios
- ‚úÖ C√°lculo autom√°tico de subs√≠dios
- ‚úÖ Controle de pagamentos mensais
- ‚úÖ Integra√ß√£o com busca de funcion√°rios
- ‚úÖ Estat√≠sticas financeiras
- ‚úÖ 3 Tabs: Alugu√©is | Resid√™ncias | Novo Aluguel
- ‚úÖ API Mock completa (`lib/api-alugueis-residencias.ts`)

**APIs Backend Necess√°rias (16 endpoints):**

**Resid√™ncias:**
- GET `/api/residencias` - Listar todas
- GET `/api/residencias/:id` - Buscar por ID
- POST `/api/residencias` - Criar nova
- PUT `/api/residencias/:id` - Atualizar
- DELETE `/api/residencias/:id` - Deletar

**Alugu√©is:**
- GET `/api/alugueis` - Listar todos
- GET `/api/alugueis/:id` - Buscar por ID
- POST `/api/alugueis` - Criar contrato
- PUT `/api/alugueis/:id` - Atualizar
- POST `/api/alugueis/:id/encerrar` - Encerrar contrato

**Pagamentos:**
- GET `/api/alugueis/:id/pagamentos` - Listar pagamentos
- POST `/api/alugueis/:id/pagamentos` - Registrar pagamento
- PUT `/api/alugueis/:id/pagamentos/:pagId` - Atualizar pagamento
- GET `/api/alugueis/pagamentos/pendentes` - Listar pendentes

**Relat√≥rios:**
- GET `/api/alugueis/estatisticas` - Dashboard
- GET `/api/alugueis/relatorio-financeiro` - Relat√≥rio per√≠odo

**Integra√ß√µes Necess√°rias:**
- üë• Funcion√°rios (buscar dados do funcion√°rio)
- üí∞ Folha de Pagamento (desconto em folha)
- üìä Financeiro (lan√ßamentos cont√°beis)
- üîî Notifica√ß√µes (alertas de vencimento)
- üìÅ Upload de documentos (fotos, comprovantes)

**Banco de Dados Necess√°rio:**
- Tabela `residencias`
- Tabela `alugueis_residencias`
- Tabela `pagamentos_aluguel`
- Tabela `residencias_fotos`

**Prioridade:** üî¥ ALTA (m√≥dulo financeiro com impacto direto)

---

## üî¥ PRIORIDADE ALTA - M√≥dulos Financeiros

### 3. **Medi√ß√µes Financeiras**
**Status:** ‚ö†Ô∏è Parcialmente Integrado  
**Localiza√ß√£o:** `/dashboard/financeiro/medicoes/page.tsx`

- ‚úÖ **Integrado:** Medi√ß√µes e Loca√ß√µes
- ‚ùå **Pendente:** Receitas e Custos (linhas 168-218)

**A√ß√£o:**
- Integrar com `api-receitas.ts` (existe mas n√£o usado)
- Integrar com `api-custos.ts` (existe mas n√£o usado)

---

### 4. **Relat√≥rios Financeiros**
**Status:** ‚ùå Totalmente Mockado  
**Localiza√ß√£o:** `/dashboard/financeiro/relatorios/page.tsx`

**Dados Mockados:**
- Relat√≥rios financeiros gerais
- Vendas e contratos
- Faturamento mensal
- Loca√ß√µes e estoque

**APIs Necess√°rias:**
- `POST /api/relatorios/gerar` - Gerar relat√≥rio customizado
- `GET /api/relatorios/faturamento` - Dados de faturamento
- `GET /api/relatorios/vendas` - Relat√≥rio de vendas
- `GET /api/relatorios/locacoes` - Relat√≥rio de loca√ß√µes

**Prioridade:** üî¥ ALTA

---

### 5. **Cadastro Financeiro**
**Status:** ‚ùå Totalmente Mockado  
**Localiza√ß√£o:** `/dashboard/financeiro/cadastro/page.tsx`

**Mockado:**
- Clientes (existe API mas usa fallback)
- Fornecedores (n√£o existe API)
- Produtos (n√£o existe API)
- Funcion√°rios (existe API mas usa fallback)

**APIs Necess√°rias:**
- `api-fornecedores.ts` (criar novo)
- `api-produtos.ts` ou `api-catalogo.ts` (criar novo)

**Prioridade:** üü° M√âDIA

---

### 6. **Log√≠stica**
**Status:** ‚ùå Totalmente Mockado  
**Localiza√ß√£o:** `/dashboard/financeiro/logistica/page.tsx`

**Mockado:**
- Manifestos de carga
- CT-e (Conhecimento de Transporte)
- Motoristas
- Viagens

**APIs Necess√°rias:**
- `POST /api/logistica/manifestos` - Criar manifesto
- `GET /api/logistica/manifestos` - Listar manifestos
- `POST /api/logistica/cte` - Emitir CT-e
- `GET /api/logistica/motoristas` - Listar motoristas
- `POST /api/logistica/viagens` - Registrar viagem

**Prioridade:** üü° M√âDIA

---

### 7. **Impostos**
**Status:** ‚ùå Totalmente Mockado  
**Localiza√ß√£o:** `/dashboard/financeiro/impostos/page.tsx`

**Mockado:**
- Pagamentos de impostos
- Relat√≥rios mensais
- C√°lculos tribut√°rios

**APIs Necess√°rias:**
- `GET /api/impostos` - Listar impostos
- `POST /api/impostos/calcular` - Calcular impostos
- `POST /api/impostos/pagar` - Registrar pagamento
- `GET /api/impostos/relatorio` - Relat√≥rio mensal

**Prioridade:** üü° M√âDIA

---

### 8. **Compras**
**Status:** ‚ö†Ô∏è Parcialmente Mockado  
**Localiza√ß√£o:** `/dashboard/financeiro/compras/page.tsx`

- ‚úÖ M√≥dulo funcional
- ‚ùå Fornecedores em fallback mockado

**A√ß√£o:**
- Criar `api-fornecedores.ts` completo

**Prioridade:** üü° M√âDIA

---

### 9. **Vendas**
**Status:** ‚ö†Ô∏è Parcialmente Integrado  
**Localiza√ß√£o:** `/dashboard/financeiro/vendas/page.tsx`

- ‚úÖ M√≥dulo funcional
- ‚ùå Fallback para clientes mockados

**A√ß√£o:**
- Garantir API de clientes est√°vel
- Remover fallback

**Prioridade:** üü¢ BAIXA

---

### 10. **Contas Banc√°rias**
**Status:** ‚ö†Ô∏è Verificar Integra√ß√£o  
**Localiza√ß√£o:** `/dashboard/financeiro/contas-bancarias/page.tsx`

**A√ß√£o:**
- Validar se est√° integrado com backend
- Testar opera√ß√µes de CRUD

---

## üü° PRIORIDADE M√âDIA - M√≥dulos de RH

### 11. **Aloca√ß√£o Funcion√°rios em Obras**
**Status:** ‚ùå Totalmente Mockado  
**Localiza√ß√£o:** `/dashboard/rh-completo/obras/page.tsx`

**APIs Necess√°rias:**
- `GET /api/alocacoes` - Listar aloca√ß√µes
- `POST /api/alocacoes` - Alocar funcion√°rio
- `DELETE /api/alocacoes/:id` - Remover aloca√ß√£o
- `GET /api/alocacoes/obra/:obraId` - Por obra

**Prioridade:** üü° M√âDIA

---

### 12. **Ponto Eletr√¥nico (RH Completo)**
**Status:** ‚ùå Totalmente Mockado  
**Localiza√ß√£o:** `/dashboard/rh-completo/ponto/page.tsx`

**Mockado:**
- Registros de ponto
- Resumo de horas por funcion√°rio

**A√ß√£o:**
- Integrar com `api-ponto-eletronico.ts` (existe)
- Expandir funcionalidades

**Prioridade:** üü° M√âDIA

---

### 13. **F√©rias e Afastamentos**
**Status:** ‚ö†Ô∏è Parcialmente Integrado  
**Localiza√ß√£o:** `/dashboard/rh-completo/ferias/page.tsx`

**Mockado:**
- Registros de f√©rias
- Registros de afastamentos

**A√ß√£o:**
- Integrar com `api-ferias.ts` (existe)
- Criar endpoints de afastamentos

**Prioridade:** üü° M√âDIA

---

### 14. **Auditoria e Permiss√µes**
**Status:** ‚ö†Ô∏è Parcialmente Mockado  
**Localiza√ß√£o:** `/dashboard/rh-completo/auditoria/page.tsx`

**Mockado:**
- Perfis de usu√°rio
- Permiss√µes do sistema

**A√ß√£o:**
- Implementar sistema completo de permiss√µes
- Integrar com `api-permissoes.ts` (existe)

**Prioridade:** üü° M√âDIA

---

### 15. **Cargos**
**Status:** ‚ö†Ô∏è Verificar  
**Localiza√ß√£o:** `/dashboard/rh-completo/cargos/page.tsx`

**A√ß√£o:**
- Validar integra√ß√£o com backend

---

### 16. **Remunera√ß√£o**
**Status:** ‚ö†Ô∏è Verificar  
**Localiza√ß√£o:** `/dashboard/rh-completo/remuneracao/page.tsx`

**A√ß√£o:**
- Validar integra√ß√£o com backend

---

### 17. **Vales**
**Status:** ‚ö†Ô∏è Verificar  
**Localiza√ß√£o:** `/dashboard/rh-completo/vales/page.tsx`

**A√ß√£o:**
- Validar integra√ß√£o com backend

---

### 18. **Hist√≥rico RH**
**Status:** ‚ö†Ô∏è Verificar  
**Localiza√ß√£o:** `/dashboard/rh-completo/historico/page.tsx`

**A√ß√£o:**
- Validar integra√ß√£o com backend

---

## üü¢ PRIORIDADE BAIXA - M√≥dulos Operacionais

### 19. **Gruas por M√™s**
**Status:** ‚ùå Totalmente Mockado  
**Localiza√ß√£o:** `/dashboard/gruas-mes/page.tsx`

**Mockado:**
- Controle mensal de gruas
- Horas trabalhadas
- Efici√™ncia e custos

**APIs Necess√°rias:**
- `GET /api/gruas/mensais` - Controle mensal
- `POST /api/gruas/mensais` - Atualizar dados mensais

**Prioridade:** üü¢ BAIXA

---

### 20. **Checklist de Devolu√ß√£o**
**Status:** ‚ùå Totalmente Mockado  
**Localiza√ß√£o:** `/dashboard/checklist-devolucao/page.tsx`

**Mockado:**
- Itens de devolu√ß√£o
- Obras e gruas

**APIs Necess√°rias:**
- `GET /api/checklist-devolucao` - Listar checklists
- `POST /api/checklist-devolucao` - Criar checklist
- `PUT /api/checklist-devolucao/:id` - Atualizar

**Prioridade:** üü¢ BAIXA

---

### 21. **M√∫ltiplas Gruas por Obra**
**Status:** ‚ùå Totalmente Mockado  
**Localiza√ß√£o:** `components/multiple-gruas-manager.tsx`

**Mockado:**
- Gruas alocadas
- Gruas dispon√≠veis

**A√ß√£o:**
- Integrar com `api-grua-obra.ts` ou `api-obra-gruas.ts`

**Prioridade:** üü¢ BAIXA

---

### 22. **Livro de Grua**
**Status:** ‚úÖ Integrado  
**Localiza√ß√£o:** `lib/api-livro-grua.ts`

- ‚úÖ CRUD completo implementado

---

### 23. **Gruas**
**Status:** ‚úÖ Integrado  
**Localiza√ß√£o:** `/dashboard/gruas`

- ‚úÖ Listagem e gest√£o de gruas

---

### 24. **Obras**
**Status:** ‚úÖ Integrado  
**Localiza√ß√£o:** `/dashboard/obras`

- ‚úÖ CRUD completo de obras

---

### 25. **Funcion√°rios**
**Status:** ‚úÖ Integrado  
**Localiza√ß√£o:** `/dashboard/funcionarios`

- ‚úÖ CRUD completo de funcion√°rios

---

### 26. **Clientes**
**Status:** ‚úÖ Integrado  
**Localiza√ß√£o:** `/dashboard/clientes`

- ‚úÖ CRUD completo de clientes

---

### 27. **Estoque**
**Status:** ‚úÖ Integrado  
**Localiza√ß√£o:** `/dashboard/estoque`

- ‚úÖ Gest√£o de estoque

---

## üì± PWA - Aplicativo Mobile

### 28. **PWA - Encarregador**
**Status:** ‚ö†Ô∏è Fallback Mockado  
**Localiza√ß√£o:** `/app/pwa/encarregador/page.tsx`

**A√ß√£o:**
- Remover fallbacks mockados
- Garantir APIs est√°veis

**Prioridade:** üü° M√âDIA

---

### 29. **PWA - Documentos**
**Status:** ‚ö†Ô∏è Fallback Mockado  
**Localiza√ß√£o:** `/app/pwa/documentos/page.tsx`

**A√ß√£o:**
- Garantir API de documentos
- Remover fallback

**Prioridade:** üü° M√âDIA

---

### 30. **PWA - Assinatura**
**Status:** ‚ùå Totalmente Mockado  
**Localiza√ß√£o:** `/app/pwa/assinatura/page.tsx`

**Mockado:**
- Lista completa de documentos

**A√ß√£o:**
- Integrar com sistema de assinaturas
- Conectar com API de documentos

**Prioridade:** üü¢ BAIXA

---

### 31. **PWA - Ponto**
**Status:** ‚úÖ Integrado  
**Localiza√ß√£o:** `/app/pwa/ponto`

- ‚úÖ Sistema de ponto funcionando

---

### 32. **PWA - Gruas**
**Status:** ‚úÖ Integrado  
**Localiza√ß√£o:** `/app/pwa/gruas`

- ‚úÖ Visualiza√ß√£o de gruas

---

## üìö Biblioteca de Dados Mock

### **Mock Data Central**
**Localiza√ß√£o:** `lib/mock-data.ts`

**Cont√©m:**
- Clientes
- Usu√°rios
- Obras
- Gruas
- Documentos
- Custos
- Custos mensais

**A√ß√£o:**
- ‚ö†Ô∏è Manter apenas para testes/desenvolvimento
- ‚ùå Remover todas importa√ß√µes em produ√ß√£o
- ‚úÖ Migrar m√≥dulos para APIs reais

---

## üîß Novas APIs que Precisam Ser Criadas

### Backend APIs - Ordem de Prioridade

#### üî¥ PRIORIDADE ALTA (Implementar Primeiro)

1. **api-notificacoes** ‚≠ê NOVO
   - Sistema completo de notifica√ß√µes
   - Push notifications
   - 4 endpoints principais

2. **api-alugueis-residencias** ‚≠ê NOVO
   - Gest√£o de resid√™ncias
   - Contratos de aluguel
   - Pagamentos e relat√≥rios
   - 16 endpoints

3. **api-relatorios-financeiros**
   - Gera√ß√£o de relat√≥rios
   - Exporta√ß√£o PDF/Excel
   - Dashboards financeiros

#### üü° PRIORIDADE M√âDIA

4. **api-fornecedores**
   - CRUD de fornecedores
   - Integra√ß√£o com compras

5. **api-produtos** ou **api-catalogo**
   - Cat√°logo de produtos
   - Pre√ßos e estoque

6. **api-logistica**
   - Manifestos e CT-e
   - Motoristas e viagens

7. **api-impostos**
   - C√°lculo autom√°tico
   - Controle de pagamentos

8. **api-alocacao-funcionarios**
   - Aloca√ß√£o em obras
   - Controle de horas

#### üü¢ PRIORIDADE BAIXA

9. **api-ferias-afastamentos**
   - Expandir API existente
   - Afastamentos m√©dicos

10. **api-gruas-mensais**
    - Controle mensal
    - Efici√™ncia e custos

11. **api-checklist-devolucao**
    - Gest√£o de devolu√ß√µes

---

## üìã Plano de A√ß√£o Recomendado

### üî¥ Fase 1 - NOVOS M√ìDULOS (2-3 semanas)
**Prioridade M√°xima**

1. ‚úÖ Sistema de Notifica√ß√µes (backend)
   - Implementar 4 endpoints principais
   - Sistema de push notifications
   - Integra√ß√£o com email

2. ‚úÖ Alugu√©is de Resid√™ncias (backend)
   - Implementar 16 endpoints
   - Estrutura de banco de dados
   - Integra√ß√£o com folha de pagamento

### üî¥ Fase 2 - FINANCEIRO (2-3 semanas)

3. ‚úÖ Relat√≥rios Financeiros
4. ‚úÖ Integrar Receitas/Custos em Medi√ß√µes
5. ‚úÖ API de Fornecedores
6. ‚úÖ API de Produtos/Cat√°logo
7. ‚úÖ Impostos

### üü° Fase 3 - RH (2 semanas)

8. ‚úÖ Ponto eletr√¥nico (expandir)
9. ‚úÖ Aloca√ß√£o funcion√°rios-obras
10. ‚úÖ F√©rias e afastamentos completo
11. ‚úÖ Permiss√µes e auditoria

### üü° Fase 4 - LOG√çSTICA E OPERACIONAL (1-2 semanas)

12. ‚úÖ Log√≠stica (manifestos, CT-e, viagens)
13. ‚úÖ Gruas por m√™s
14. ‚úÖ Checklist devolu√ß√£o
15. ‚úÖ M√∫ltiplas gruas

### üü¢ Fase 5 - PWA E LIMPEZA (1 semana)

16. ‚úÖ Remover todos os fallbacks PWA
17. ‚úÖ Garantir funcionamento offline
18. ‚úÖ Remover imports de mock-data.ts
19. ‚úÖ Testes finais

---

## üìä Estat√≠sticas Gerais

| M√©trica | Valor |
|---------|-------|
| **M√≥dulos Totais** | 32 |
| **Totalmente Integrados** | 10 (31%) |
| **Parcialmente Integrados** | 8 (25%) |
| **Pendentes** | 14 (44%) |
| **Novos M√≥dulos Frontend** | 2 |
| **APIs a Criar** | 11 |
| **APIs a Melhorar** | 5 |
| **Linhas de C√≥digo Mock** | ~3.500+ |
| **Tempo Estimado Total** | 8-12 semanas |

---

## ‚úÖ Checklist de Integra√ß√£o

Para cada m√≥dulo integrado, verificar:

- [ ] Substituir dados mock por chamadas de API
- [ ] Implementar tratamento de erros adequado
- [ ] Adicionar loading states
- [ ] Implementar valida√ß√µes frontend e backend
- [ ] Testar CRUD completo
- [ ] Documentar endpoints (Swagger/OpenAPI)
- [ ] Remover imports de `mock-data.ts`
- [ ] Adicionar testes unit√°rios
- [ ] Adicionar testes de integra√ß√£o
- [ ] Testar em ambiente de staging
- [ ] Deploy em produ√ß√£o
- [ ] Monitoramento e logs

---

## üîê Considera√ß√µes de Seguran√ßa

Para todas as novas APIs:

1. **Autentica√ß√£o:** JWT com refresh token
2. **Autoriza√ß√£o:** Sistema de permiss√µes por m√≥dulo
3. **Valida√ß√£o:** Joi/Zod para valida√ß√£o de dados
4. **Rate Limiting:** Limitar requisi√ß√µes por IP/usu√°rio
5. **Logs:** Auditoria completa de opera√ß√µes
6. **Sanitiza√ß√£o:** Prevenir SQL Injection e XSS
7. **HTTPS:** Apenas conex√µes seguras
8. **CORS:** Configura√ß√£o adequada

---

## üìù Documenta√ß√£o Relacionada

- üìÑ `NOTIFICACOES_README.md` - Documenta√ß√£o completa do sistema de notifica√ß√µes
- üìÑ `ALUGUEIS_RESIDENCIAS_README.md` - Documenta√ß√£o completa de alugu√©is
- üìÑ `PWA_README.md` - Documenta√ß√£o do PWA
- üìÑ `MANUAL_DO_USUARIO.md` - Manual do usu√°rio

---

## üéØ Pr√≥ximos Passos Imediatos

### Esta Semana:
1. ‚≠ê Implementar backend de **Notifica√ß√µes**
2. ‚≠ê Implementar backend de **Alugu√©is de Resid√™ncias**
3. üìã Criar estrutura de banco de dados para ambos

### Pr√≥xima Semana:
1. Testar notifica√ß√µes em produ√ß√£o
2. Testar alugu√©is em produ√ß√£o
3. Iniciar Fase 2 (Relat√≥rios Financeiros)

---

**Data do Relat√≥rio:** 09 de Outubro de 2025  
**Pr√≥xima Revis√£o:** Ap√≥s conclus√£o da Fase 1  
**Respons√°vel:** Time de Desenvolvimento

---

## üìû Suporte

Para d√∫vidas sobre integra√ß√µes:
- Consultar arquivos mock nas pastas `lib/api-*.ts`
- Ver componentes frontend em `app/dashboard/`
- Revisar documenta√ß√£o espec√≠fica de cada m√≥dulo

